# ğŸš€ Script CÃ i Äáº·t N8N Tá»± Äá»™ng vá»›i FFmpeg, yt-dlp, Puppeteer vÃ  News API

![N8N](https://img.shields.io/badge/N8N-Automation-blue) ![Docker](https://img.shields.io/badge/Docker-Containerized-blue) ![SSL](https://img.shields.io/badge/SSL-Auto-green) ![API](https://img.shields.io/badge/News%20API-FastAPI-red) ![Telegram](https://img.shields.io/badge/Telegram-Backup-orange)

> ğŸ¥ **HÃƒY ÄÄ‚NG KÃ KÃŠNH YOUTUBE Äá»‚ á»¦NG Há»˜ MÃŒNH NHÃ‰!** ğŸ‘ˆ  
> **[ğŸ‘‰ ÄÄ‚NG KÃ NGAY Táº I ÄÃ‚Y](https://www.youtube.com/@kalvinthiensocial?sub_confirmation=1)** Ä‘á»ƒ khÃ´ng bá» lá»¡ video hÆ°á»›ng dáº«n má»›i nháº¥t! ğŸ””

Script tá»± Ä‘á»™ng cÃ i Ä‘áº·t **N8N Workflow Automation** vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng má»Ÿ rá»™ng 2025, bao gá»“m:
- **ğŸ¤– N8N** vá»›i FFmpeg, yt-dlp, Puppeteer
- **ğŸ“° News Content API** (FastAPI + Newspaper4k) 
- **ğŸ“± Telegram Backup** tá»± Ä‘á»™ng hÃ ng ngÃ y
- **ğŸ”’ SSL Certificate** tá»± Ä‘á»™ng vá»›i Caddy
- **ğŸ’¾ Smart Backup System** vá»›i compression
- **ğŸ”„ Auto-Update** vá»›i tÃ¹y chá»n

## ğŸ‘¨â€ğŸ’» ThÃ´ng Tin TÃ¡c Giáº£

**ğŸŒŸ Nguyá»…n Ngá»c Thiá»‡n**
- ğŸ“º **YouTube**: [Kalvin Thien Social](https://www.youtube.com/@kalvinthiensocial?sub_confirmation=1) - **ğŸ”” ÄÄ‚NG KÃ Äá»‚ á»¦NG Há»˜!**
- ğŸ“˜ **Facebook**: [Ban Thien Handsome](https://www.facebook.com/Ban.Thien.Handsome/)
- ğŸ“± **Zalo/Phone**: 08.8888.4749
- ğŸ¬ **N8N Playlist**: [N8N Tutorials](https://www.youtube.com/@kalvinthiensocial/playlists)
- ğŸš€ **Cáº­p nháº­t**: 27/12/2024

> ğŸ’¡ **Náº¿u script nÃ y há»¯u Ã­ch, Ä‘á»«ng quÃªn:**  
> â­ **Star** repository nÃ y  
> ğŸ¥ **Subscribe** YouTube channel  
> ğŸ‘ **Like** vÃ  **Share** Ä‘á»ƒ giÃºp mÃ¬nh phÃ¡t triá»ƒn kÃªnh nhÃ©! 

## âœ¨ TÃ­nh NÄƒng Ná»•i Báº­t 2025

### ğŸ”§ N8N Core Features
- **ğŸ¤– N8N** vá»›i táº¥t cáº£ tÃ­nh nÄƒng automation
- **ğŸ¬ FFmpeg** - Xá»­ lÃ½ video/audio chuyÃªn nghiá»‡p
- **ğŸ“º yt-dlp** - Download video YouTube/TikTok/Facebook
- **ğŸŒ Puppeteer + Chromium** - Browser automation
- **ğŸ”’ SSL tá»± Ä‘á»™ng** vá»›i Caddy reverse proxy
- **ğŸ“ Volume mapping** cho file persistence
- **âš¡ Swap memory** tá»± Ä‘á»™ng theo RAM

### ğŸ“° News Content API (TÃ­nh nÄƒng HOT 2025!)
> **TÃNH NÄ‚NG Má»šI 2025!** ğŸ‰

- **ğŸš€ FastAPI** vá»›i **Newspaper4k** má»›i nháº¥t
- **ğŸ” Bearer Token Authentication** tÃ¹y chá»‰nh báº£o máº­t
- **ğŸŒ Subdomain riÃªng**: `api.yourdomain.com`
- **ğŸ“± Responsive UI** vá»›i thiáº¿t káº¿ 2025
- **ğŸ“š Interactive Documentation** (Swagger + ReDoc)
- **ğŸŒ Äa ngÃ´n ngá»¯** (Viá»‡t, Anh, Trung, Nháº­t...)

**API Endpoints:**
- `GET /health` - Kiá»ƒm tra tráº¡ng thÃ¡i API
- `POST /extract-article` - Láº¥y ná»™i dung bÃ i viáº¿t tá»« URL
- `POST /extract-source` - Crawl nhiá»u bÃ i viáº¿t tá»« website
- `POST /parse-feed` - PhÃ¢n tÃ­ch RSS feeds

### ğŸ“± Telegram Backup System (TÃ­nh nÄƒng HOT!)
- **ğŸ”„ Tá»± Ä‘á»™ng backup** workflows & credentials má»—i ngÃ y 2:00 AM
- **ğŸ“± Gá»­i file backup** qua Telegram Bot (náº¿u <20MB)
- **ğŸ“Š ThÃ´ng bÃ¡o realtime** vá» tráº¡ng thÃ¡i backup
- **ğŸ—‚ï¸ Giá»¯ 30 báº£n backup** gáº§n nháº¥t tá»± Ä‘á»™ng
- **ğŸ§ª Test manual backup** Ä‘á»ƒ kiá»ƒm tra

### ğŸ’¾ Smart Backup System
- **ğŸ“‹ Export workflows** tá»« N8N database
- **ğŸ” Backup credentials** & encryption keys  
- **ğŸ“¦ Compression** vá»›i tar.gz
- **ğŸ“Š Metadata tracking** (version, size, date)
- **ğŸ§¹ Auto cleanup** backup cÅ©
- **ğŸ“‹ Detailed logging** má»i hoáº¡t Ä‘á»™ng

## ğŸ–¥ï¸ Há»— Trá»£ MÃ´i TrÆ°á»ng

âœ… **Ubuntu VPS/Server** (Khuyáº¿n nghá»‹)  
âœ… **Ubuntu on Windows WSL2**  
âœ… **Ubuntu Docker Environment**  
âœ… **Auto-detect** vÃ  xá»­ lÃ½ mÃ´i trÆ°á»ng

## ğŸ“‹ YÃªu Cáº§u Há»‡ Thá»‘ng

- **OS**: Ubuntu 20.04+ (VPS hoáº·c WSL)
- **RAM**: Tá»‘i thiá»ƒu 2GB (khuyáº¿n nghá»‹ 4GB+)
- **Storage**: 20GB+ free space
- **Network**: Domain Ä‘Ã£ trá» vá» server IP
- **Access**: Root/sudo permissions

## ğŸš€ CÃ i Äáº·t SiÃªu Nhanh

### 1ï¸âƒ£ Má»™t Lá»‡nh CÃ i Äáº·t (Khuyáº¿n nghá»‹)

```bash
cd /tmp && curl -sSL https://raw.githubusercontent.com/KalvinThien/install-n8n-ffmpeg/main/auto_cai_dat_n8n.sh | tr -d '\r' > install_n8n.sh && chmod +x install_n8n.sh && sudo bash install_n8n.sh
```

### 2ï¸âƒ£ Hoáº·c Download & Cháº¡y

```bash
wget https://raw.githubusercontent.com/KalvinThien/install-n8n-ffmpeg/main/auto_cai_dat_n8n.sh
chmod +x auto_cai_dat_n8n.sh
sudo ./auto_cai_dat_n8n.sh
```

### 3ï¸âƒ£ CÃ i Äáº·t Sáº¡ch (XÃ³a háº¿t cÃ i Ä‘áº·t cÅ©)

```bash
sudo ./auto_cai_dat_n8n.sh --clean
```

### 4ï¸âƒ£ Options NÃ¢ng Cao

```bash
# Chá»‰ Ä‘á»‹nh thÆ° má»¥c cÃ i Ä‘áº·t
sudo ./auto_cai_dat_n8n.sh -d /custom/path

# Bá» qua cÃ i Ä‘áº·t Docker (náº¿u Ä‘Ã£ cÃ³)
sudo ./auto_cai_dat_n8n.sh -s

# Xem trá»£ giÃºp Ä‘áº§y Ä‘á»§
./auto_cai_dat_n8n.sh -h
```

## ğŸ”§ QuÃ¡ TrÃ¬nh CÃ i Äáº·t TÆ°Æ¡ng TÃ¡c

Script sáº½ hÆ°á»›ng dáº«n báº¡n qua tá»«ng bÆ°á»›c:

1. **ğŸ”„ Setup Swap** - Tá»± Ä‘á»™ng tÃ­nh toÃ¡n vÃ  setup swap phÃ¹ há»£p
2. **ğŸŒ Nháº­p Domain** - Domain chÃ­nh cho N8N 
3. **ğŸ—‘ï¸ Cleanup Option** - TÃ¹y chá»n xÃ³a cÃ i Ä‘áº·t cÅ© (náº¿u cÃ³)
4. **ğŸ“° News API Setup** - CÃ³ muá»‘n cÃ i News Content API khÃ´ng?
5. **ğŸ” Bearer Token** - Äáº·t máº­t kháº©u Bearer Token báº£o máº­t
6. **ğŸ“± Telegram Config** - CÃ³ muá»‘n backup qua Telegram khÃ´ng?
7. **ğŸ”„ Auto-Update** - CÃ³ muá»‘n tá»± Ä‘á»™ng cáº­p nháº­t khÃ´ng?
8. **âœ… DNS Verification** - Kiá»ƒm tra domain Ä‘Ã£ trá» Ä‘Ãºng chÆ°a
9. **ğŸ³ Docker Installation** - CÃ i Ä‘áº·t Docker & dependencies
10. **ğŸ—ï¸ Build & Deploy** - Build images vÃ  khá»Ÿi Ä‘á»™ng containers  
11. **ğŸ”’ SSL Setup** - Tá»± Ä‘á»™ng cáº¥p SSL certificate

## ğŸ“° News Content API - TÃNH NÄ‚NG SIÃŠU HOT 2025! 

### ğŸ¯ Giá»›i Thiá»‡u
News Content API Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i **FastAPI** vÃ  **Newspaper4k** phiÃªn báº£n má»›i nháº¥t, giÃºp báº¡n:
- **ğŸ“° CÃ o ná»™i dung** bÃ i viáº¿t tá»« báº¥t ká»³ website nÃ o
- **ğŸ“¡ Parse RSS feeds** Ä‘á»ƒ láº¥y tin tá»©c má»›i nháº¥t  
- **ğŸ” TÃ¬m kiáº¿m** vÃ  phÃ¢n tÃ­ch ná»™i dung tá»± Ä‘á»™ng
- **ğŸ¤– TÃ­ch há»£p** trá»±c tiáº¿p vÃ o N8N workflows

### ğŸ”‘ Authentication

Táº¥t cáº£ API calls yÃªu cáº§u **Bearer Token tÃ¹y chá»‰nh**:

```bash
Authorization: Bearer YOUR_CUSTOM_TOKEN_HERE
```

> **ğŸ” Báº£o máº­t:** Script sáº½ yÃªu cáº§u báº¡n tá»± Ä‘áº·t Bearer Token (Ã­t nháº¥t 20 kÃ½ tá»±) Ä‘á»ƒ Ä‘áº£m báº£o báº£o máº­t tá»‘i Ä‘a!

### ğŸ“– API Documentation

Sau khi cÃ i Ä‘áº·t, truy cáº­p:
- **ğŸ  Homepage**: `https://api.yourdomain.com/`
- **ğŸ“š Swagger UI**: `https://api.yourdomain.com/docs` 
- **ğŸ“– ReDoc**: `https://api.yourdomain.com/redoc`

### ğŸ’» VÃ­ Dá»¥ Sá»­ Dá»¥ng vá»›i cURL

**1. ğŸ©º Kiá»ƒm tra API:**
```bash
curl -X GET "https://api.yourdomain.com/health" \
     -H "Authorization: Bearer YOUR_CUSTOM_TOKEN"
```

**2. ğŸ“° Láº¥y ná»™i dung bÃ i viáº¿t:**
```bash
curl -X POST "https://api.yourdomain.com/extract-article" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer YOUR_CUSTOM_TOKEN" \
     -d '{
       "url": "https://dantri.com.vn/the-gioi.htm",
       "language": "vi", 
       "extract_images": true,
       "summarize": true
     }'
```

**3. ğŸŒ CÃ o nhiá»u bÃ i viáº¿t tá»« website:**
```bash
curl -X POST "https://api.yourdomain.com/extract-source" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer YOUR_CUSTOM_TOKEN" \
     -d '{
       "url": "https://dantri.com.vn",
       "max_articles": 10,
       "language": "vi"
     }'
```

**4. ğŸ“¡ Parse RSS Feed:**
```bash
curl -X POST "https://api.yourdomain.com/parse-feed" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer YOUR_CUSTOM_TOKEN" \
     -d '{
       "url": "https://dantri.com.vn/rss.xml",
       "max_articles": 10
     }'
```

### ğŸ”§ Äá»•i Bearer Token {#change-token}

**Method 1: Qua Docker Environment**
```bash
cd /home/n8n
sed -i 's/NEWS_API_TOKEN=.*/NEWS_API_TOKEN=NEW_TOKEN_HERE/' docker-compose.yml
docker-compose restart fastapi
```

**Method 2: Edit trá»±c tiáº¿p**
```bash
nano /home/n8n/docker-compose.yml
# TÃ¬m dÃ²ng NEWS_API_TOKEN vÃ  thay Ä‘á»•i
docker-compose restart fastapi
```

**Method 3: One-liner command**
```bash
cd /home/n8n && sed -i 's/NEWS_API_TOKEN=.*/NEWS_API_TOKEN="YOUR_NEW_TOKEN"/' docker-compose.yml && docker-compose restart fastapi
```

### ğŸ¤– Sá»­ Dá»¥ng trong N8N Workflows

**1. Táº¡o HTTP Request Node:**
- **Method**: POST
- **URL**: `https://api.yourdomain.com/extract-article`
- **Authentication**: Header Auth
  - **Name**: `Authorization`
  - **Value**: `Bearer YOUR_CUSTOM_TOKEN`

**2. Request Body:**
```json
{
  "url": "{{ $json.article_url }}",
  "language": "vi",
  "extract_images": true,
  "summarize": false
}
```

**3. Response sáº½ chá»©a:**
```json
{
  "title": "TiÃªu Ä‘á» bÃ i viáº¿t",
  "content": "Ná»™i dung Ä‘áº§y Ä‘á»§...",
  "summary": "TÃ³m táº¯t bÃ i viáº¿t",
  "authors": ["TÃ¡c giáº£"],
  "publish_date": "2024-12-27T10:00:00Z",
  "images": ["url1.jpg", "url2.jpg"],
  "word_count": 500,
  "read_time_minutes": 3
}
```

## ğŸ“± Telegram Backup System

### ğŸ”§ Cáº¥u HÃ¬nh Telegram Bot

**1. ğŸ¤– Táº¡o Bot:**
- Má»Ÿ Telegram, tÃ¬m **@BotFather**
- Gá»­i lá»‡nh: `/newbot`
- Äáº·t tÃªn vÃ  username cho bot
- **Copy Bot Token** nháº­n Ä‘Æ°á»£c

**2. ğŸ†” Láº¥y Chat ID:**

**Cho cÃ¡ nhÃ¢n:**
- TÃ¬m **@userinfobot** trÃªn Telegram
- Gá»­i `/start` Ä‘á»ƒ láº¥y **User ID**

**Cho nhÃ³m:**
- ThÃªm bot vÃ o nhÃ³m 
- Gá»­i tin nháº¯n trong nhÃ³m
- Truy cáº­p: `https://api.telegram.org/bot<BOT_TOKEN>/getUpdates`
- **Chat ID nhÃ³m** báº¯t Ä‘áº§u báº±ng dáº¥u trá»« (-)

### ğŸ“± Test Telegram Integration

```bash
# Test gá»­i tin nháº¯n
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/sendMessage" \
     -d chat_id="<CHAT_ID>" \
     -d text="Test message from N8N backup system!"
```

### ğŸ”„ Backup Features

- **â° Automatic**: Má»—i ngÃ y lÃºc 2:00 AM
- **ğŸ“± Notifications**: Realtime qua Telegram
- **ğŸ“¦ File Transfer**: Auto gá»­i file backup (náº¿u <20MB)
- **ğŸ“Š Statistics**: Sá»‘ lÆ°á»£ng workflows, size, thá»i gian
- **ğŸ—‚ï¸ Retention**: Giá»¯ 30 báº£n backup gáº§n nháº¥t

## ğŸ’¾ Backup & Restore System

### ğŸ”„ Backup Tá»± Äá»™ng

Script tá»± Ä‘á»™ng backup má»—i ngÃ y lÃºc **2:00 AM**:
- **ğŸ“‹ Workflows** vÃ  **Credentials** tá»« N8N
- **ğŸ’¾ Database** (SQLite) vá»›i táº¥t cáº£ dá»¯ liá»‡u
- **ğŸ” Encryption keys** vÃ  config files
- **ğŸ“¦ Compression** vá»›i gzip Ä‘á»ƒ tiáº¿t kiá»‡m dung lÆ°á»£ng

### ğŸ§ª Test Backup Thá»§ CÃ´ng

```bash
# Cháº¡y backup test Ä‘á»ƒ kiá»ƒm tra
/home/n8n/backup-manual.sh

# Cháº¡y backup thÃ´ng thÆ°á»ng  
/home/n8n/backup-workflows.sh

# Xem logs backup
tail -f /home/n8n/files/backup_full/backup.log
```

### ğŸ“ Cáº¥u TrÃºc Backup

```
/home/n8n/files/backup_full/
â”œâ”€â”€ n8n_backup_20241227_140000.tar.gz   # Backup hÃ´m nay
â”œâ”€â”€ n8n_backup_20241226_140000.tar.gz   # Backup hÃ´m qua  
â”œâ”€â”€ n8n_backup_20241225_140000.tar.gz   # Backup 2 ngÃ y trÆ°á»›c
â”œâ”€â”€ ...                                 # Tá»‘i Ä‘a 30 báº£n
â””â”€â”€ backup.log                          # Log file
```

### ğŸ“¦ Ná»™i Dung Backup File

Má»—i file backup chá»©a:
```
backup_metadata.json          # ThÃ´ng tin backup
workflows/                    # Táº¥t cáº£ workflows exported
â”œâ”€â”€ 1-My_Workflow.json
â”œâ”€â”€ 2-Another_Workflow.json  
â””â”€â”€ workflows.json           # Danh sÃ¡ch workflows
credentials/                 # Credentials & database
â”œâ”€â”€ database.sqlite          # N8N database
â””â”€â”€ encryptionKey           # Encryption key
config/                     # Config files (náº¿u cÃ³)
```

### ğŸ”§ Restore tá»« Backup

```bash
# 1. Dá»«ng containers
cd /home/n8n && docker-compose down

# 2. Giáº£i nÃ©n backup
cd /home/n8n/files/backup_full
tar -xzf n8n_backup_YYYYMMDD_HHMMSS.tar.gz

# 3. Copy files vá» vá»‹ trÃ­ cÅ©
cp credentials/database.sqlite /home/n8n/
cp credentials/encryptionKey /home/n8n/
# Workflows sáº½ tá»± Ä‘á»™ng import khi khá»Ÿi Ä‘á»™ng N8N

# 4. Khá»Ÿi Ä‘á»™ng láº¡i
cd /home/n8n && docker-compose up -d
```

## ğŸ› ï¸ Quáº£n LÃ½ Há»‡ Thá»‘ng

### ğŸ”§ Lá»‡nh CÆ¡ Báº£n

```bash
# Xem tráº¡ng thÃ¡i containers
cd /home/n8n && docker-compose ps

# Xem logs realtime
cd /home/n8n && docker-compose logs -f

# Restart tá»«ng service
cd /home/n8n && docker-compose restart n8n
cd /home/n8n && docker-compose restart caddy
cd /home/n8n && docker-compose restart fastapi  # Náº¿u cÃ³ News API

# Rebuild toÃ n bá»™
cd /home/n8n && docker-compose down && docker-compose up -d --build
```

### ğŸ” Troubleshooting & Diagnostics

```bash
# Script cháº©n Ä‘oÃ¡n tá»± Ä‘á»™ng (TÃNH NÄ‚NG Má»šI!)
/home/n8n/troubleshoot.sh

# Kiá»ƒm tra Docker status  
docker ps --filter "name=n8n"

# Xem logs chi tiáº¿t
cd /home/n8n && docker-compose logs n8n
cd /home/n8n && docker-compose logs caddy  
cd /home/n8n && docker-compose logs fastapi  # News API

# Kiá»ƒm tra disk usage
df -h
docker system df

# Kiá»ƒm tra memory
free -h
docker stats --no-stream
```

### ğŸ”„ Updates & Maintenance

```bash
# Update tá»± Ä‘á»™ng (má»—i 12h náº¿u Ä‘Ã£ enable)
/home/n8n/update-n8n.sh

# Update manual components
docker exec -it n8n_container pip3 install --break-system-packages -U yt-dlp

# Clean Docker cache
docker system prune -f
docker image prune -f
```

## ğŸ“‚ Cáº¥u TrÃºc ThÆ° Má»¥c HoÃ n Chá»‰nh

```
/home/n8n/
â”œâ”€â”€ ğŸ³ docker-compose.yml          # Main config vá»›i táº¥t cáº£ services
â”œâ”€â”€ ğŸ—ï¸ Dockerfile                  # N8N custom image
â”œâ”€â”€ ğŸŒ Caddyfile                   # Reverse proxy + SSL config  
â”œâ”€â”€ ğŸ’¾ backup-workflows.sh         # Auto backup script
â”œâ”€â”€ ğŸ§ª backup-manual.sh            # Manual backup test script
â”œâ”€â”€ ğŸ”„ update-n8n.sh              # Auto update script
â”œâ”€â”€ ğŸ” troubleshoot.sh             # Diagnostic script (Má»šI!)
â”œâ”€â”€ ğŸ“± telegram_config.txt         # Telegram settings (náº¿u cÃ³)
â”œâ”€â”€ ğŸ”‘ news_api_token.txt         # News API token (náº¿u cÃ³)
â”œâ”€â”€ ğŸ“ files/                      # N8N data directory
â”‚   â”œâ”€â”€ backup_full/              # ğŸ’¾ Backup storage (30 báº£n)
â”‚   â”œâ”€â”€ temp/                     # ğŸ—‚ï¸ Temporary files  
â”‚   â””â”€â”€ youtube_content_anylystic/ # ğŸ¬ Video downloads
â”œâ”€â”€ ğŸ“° news_api/                   # News API (náº¿u cÃ³)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements.txt           # Python dependencies
â”‚   â”œâ”€â”€ main.py                   # FastAPI application
â”‚   â””â”€â”€ start_news_api.sh         # Startup script
â”œâ”€â”€ ğŸ’¾ database.sqlite             # N8N main database
â”œâ”€â”€ ğŸ” encryptionKey               # N8N encryption key
â””â”€â”€ ğŸ“‹ logs/                       # Log files
    â”œâ”€â”€ update.log                # Update logs
    â””â”€â”€ backup.log                # Backup logs
```

## âš¡ Performance & Optimization

### ğŸš€ System Optimization

1. **ğŸ’¾ Memory**: Script tá»± Ä‘á»™ng setup swap theo RAM
2. **âš¡ CPU**: Single worker cho stability
3. **ğŸ—‚ï¸ Disk**: Auto cleanup old backups & Docker cache
4. **ğŸŒ Network**: Caddy gzip compression enabled
5. **ğŸ”§ Docker**: Optimized images vá»›i multi-stage builds

### ğŸ“Š Performance Monitoring

```bash
# Resource usage realtime
docker stats

# Disk usage breakdown  
df -h
du -sh /home/n8n/*

# Memory usage detail
free -h && swapon --show

# Network connections
netstat -tulpn | grep :80
netstat -tulpn | grep :443
```

### ğŸ›ï¸ Performance Tuning

```bash
# TÄƒng Docker memory limits (náº¿u cáº§n)
nano /home/n8n/docker-compose.yml
# ThÃªm: mem_limit: 2g

# Tá»‘i Æ°u N8N settings
# Trong container N8N environment:
# N8N_EXECUTIONS_DATA_MAX_SIZE=500MB
# N8N_EXECUTIONS_TIMEOUT=3600
```

## ğŸ› Troubleshooting Guide

### âŒ Lá»—i ThÆ°á»ng Gáº·p & CÃ¡ch Sá»­a

**1. ğŸ³ Docker daemon not running (WSL)**
```bash
# Khá»Ÿi Ä‘á»™ng Docker daemon
sudo dockerd &

# Hoáº·c restart Docker service
sudo systemctl restart docker

# Kiá»ƒm tra status
sudo systemctl status docker
```

**2. ğŸŒ Domain chÆ°a trá» Ä‘Ãºng**
```bash
# Kiá»ƒm tra DNS propagation
dig yourdomain.com A
nslookup yourdomain.com 8.8.8.8

# Kiá»ƒm tra IP server
curl -s https://api.ipify.org

# Äá»£i DNS propagation (5-60 phÃºt)
```

**3. ğŸ³ Container khÃ´ng start**
```bash
# Xem logs chi tiáº¿t
cd /home/n8n && docker-compose logs

# Cleanup vÃ  rebuild
docker system prune -f
cd /home/n8n && docker-compose down
docker-compose up -d --build

# Náº¿u váº«n lá»—i, check ports
sudo netstat -tulpn | grep :80
sudo netstat -tulpn | grep :443
```

**4. ğŸ“° News API authentication failed**
```bash
# Kiá»ƒm tra token
grep NEWS_API_TOKEN /home/n8n/docker-compose.yml

# Test API health
curl -X GET "https://api.yourdomain.com/health" \
     -H "Authorization: Bearer YOUR_TOKEN"

# Restart News API service
cd /home/n8n && docker-compose restart fastapi
```

**5. ğŸ”’ SSL Certificate issues**
```bash
# Xem Caddy logs
cd /home/n8n && docker-compose logs caddy

# Force SSL renewal
docker-compose restart caddy

# Kiá»ƒm tra domain accessibility
curl -I https://yourdomain.com
```

**6. ğŸ“± Telegram backup khÃ´ng hoáº¡t Ä‘á»™ng**
```bash
# Test Telegram Bot
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/getMe"

# Test gá»­i tin nháº¯n
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/sendMessage" \
     -d chat_id="<CHAT_ID>" \
     -d text="Test message"

# Kiá»ƒm tra config file
cat /home/n8n/telegram_config.txt
```

**7. ğŸ’¾ Backup lá»—i**
```bash
# Cháº¡y manual backup Ä‘á»ƒ debug
/home/n8n/backup-manual.sh

# Xem log chi tiáº¿t
tail -f /home/n8n/files/backup_full/backup.log

# Kiá»ƒm tra permissions
ls -la /home/n8n/files/backup_full/
```

### ğŸ”§ Recovery Commands

```bash
# ğŸ§¹ Clean reinstall (XÃ“A Táº¤T Cáº¢!)
sudo rm -rf /home/n8n
sudo ./auto_cai_dat_n8n.sh --clean

# ğŸ”„ Soft restart services
cd /home/n8n
docker-compose restart

# ğŸ’¾ Restore tá»« backup
cd /home/n8n/files/backup_full
tar -xzf n8n_backup_YYYYMMDD_HHMMSS.tar.gz
# Copy files vá» vá»‹ trÃ­ cÅ©

# ğŸ³ Reset Docker completely  
sudo systemctl stop docker
sudo systemctl start docker
cd /home/n8n && docker-compose up -d
```

### ğŸ©º Health Check Commands

```bash
# Comprehensive system check
/home/n8n/troubleshoot.sh

# Quick status check
cd /home/n8n && docker-compose ps

# Service-specific checks
curl -I https://yourdomain.com                    # N8N
curl -I https://api.yourdomain.com/health        # News API
systemctl status docker                          # Docker
systemctl status cron                           # Cron jobs
```

## ğŸŒŸ Features Roadmap 2025

- [ ] **ğŸŒ Multi-domain** support cho nhiá»u N8N instances
- [ ] **ğŸ“Š Monitoring dashboard** vá»›i Grafana  
- [ ] **â˜¸ï¸ Kubernetes** deployment option
- [ ] **ğŸ”— External database** support (PostgreSQL)
- [ ] **ğŸ“ˆ Auto-scaling** dá»±a trÃªn load
- [ ] **ğŸ›’ Plugin marketplace** integration
- [ ] **ğŸ”” Advanced notifications** (Discord, Slack, Email)
- [ ] **ğŸ§  AI content** analysis integration

## ğŸ¤ Contributing & Support

### ğŸ’¬ Nháº­n Há»— Trá»£

- **ğŸ› Issues**: [GitHub Issues](https://github.com/KalvinThien/install-n8n-ffmpeg/issues)
- **ğŸ¥ YouTube**: [Kalvin Thien Social](https://www.youtube.com/@kalvinthiensocial) - **ÄÄ‚NG KÃ Äá»‚ á»¦NG Há»˜!**
- **ğŸ“˜ Facebook**: [Ban Thien Handsome](https://www.facebook.com/Ban.Thien.Handsome/)
- **ğŸ“± Zalo**: 08.8888.4749

### ğŸ”§ Contributing

1. **ğŸ´ Fork** repository nÃ y
2. **ğŸŒ¿ Táº¡o feature branch**: `git checkout -b feature/amazing-feature`
3. **ğŸ’¾ Commit changes**: `git commit -m 'Add amazing feature'`
4. **ğŸ“¤ Push to branch**: `git push origin feature/amazing-feature`  
5. **ğŸ”„ Create Pull Request**

### ğŸ“ Bug Reports

Khi bÃ¡o lá»—i, hÃ£y include:
- **ğŸ–¥ï¸ OS version** (Ubuntu 20.04, 22.04, etc.)
- **ğŸ³ Docker version**
- **ğŸ“‹ Error logs** tá»« `docker-compose logs`
- **ğŸ”§ Steps to reproduce**

## ğŸ“„ License & Credits

**ğŸ“œ License**: MIT License - Xem file [LICENSE](LICENSE)

**ğŸ™ Credits**:
- **N8N Team** - Workflow automation platform
- **ğŸ“° Newspaper4k** - Python article extraction  
- **ğŸš€ FastAPI** - Modern Python web framework
- **ğŸ³ Docker** - Containerization platform
- **ğŸŒ Caddy** - Web server with automatic HTTPS

## â­ Star History & Community

> **ğŸŒŸ Náº¿u script nÃ y há»¯u Ã­ch, hÃ£y cho 1 STAR Ä‘á»ƒ á»§ng há»™!**  
> **ğŸ¥ VÃ  Ä‘á»«ng quÃªn SUBSCRIBE YouTube channel nhÃ©!**

[![Star History Chart](https://api.star-history.com/svg?repos=KalvinThien/install-n8n-ffmpeg&type=Date)](https://star-history.com/#KalvinThien/install-n8n-ffmpeg&Date)

### ğŸ“Š Statistics

![GitHub stars](https://img.shields.io/github/stars/KalvinThien/install-n8n-ffmpeg?style=social)
![GitHub forks](https://img.shields.io/github/forks/KalvinThien/install-n8n-ffmpeg?style=social)  
![GitHub watchers](https://img.shields.io/github/watchers/KalvinThien/install-n8n-ffmpeg?style=social)
![GitHub downloads](https://img.shields.io/github/downloads/KalvinThien/install-n8n-ffmpeg/total)

## ğŸ¯ Quick Links

| ğŸ”— Link | ğŸ“ MÃ´ Táº£ |
|---------|-----------|
| [ğŸ¥ YouTube](https://www.youtube.com/@kalvinthiensocial?sub_confirmation=1) | **ÄÄ‚NG KÃ Ä‘á»ƒ xem video hÆ°á»›ng dáº«n!** |
| [ğŸ“š N8N Docs](https://docs.n8n.io/) | TÃ i liá»‡u chÃ­nh thá»©c N8N |
| [ğŸ“° Newspaper4k](https://pypi.org/project/newspaper4k/) | Python library Ä‘á»ƒ cÃ o tin tá»©c |
| [ğŸš€ FastAPI](https://fastapi.tiangolo.com/) | Framework cho News API |
| [ğŸ³ Docker](https://docs.docker.com/) | TÃ i liá»‡u Docker |

---

**ğŸš€ Made with â¤ï¸ by Nguyá»…n Ngá»c Thiá»‡n - December 2024**

> ğŸ’¡ **Äá»«ng quÃªn**: ÄÄ‚NG KÃ [YouTube channel](https://www.youtube.com/@kalvinthiensocial?sub_confirmation=1) Ä‘á»ƒ khÃ´ng bá» lá»¡ video má»›i! ğŸ””
